type Locale = "fr" | "en" | "de" | "es" | "zh" | "ja" | "ar" | "uk";

const translations: Record<Locale, Record<string, string>> = {
  fr: {
    app_title: "SignStamp",
    open_pdf: "Ouvrir un PDF",
    pages_singular: "page",
    pages_plural: "pages",
    zoom_out: "Zoom -",
    zoom_in: "Zoom +",
    tool_pan: "Déplacer",
    tool_text: "Texte",
    tool_date: "Date",
    tool_check: "Croix",
    tool_ellipse: "Cercle",
    tool_line: "Trait",
    tool_arrow: "Flèche",
    tool_highlight: "Surligner",
    tool_sign: "Signature",
    undo: "Annuler",
    theme_light: "Thème clair",
    theme_dark: "Thème sombre",
    font_label: "Police",
    size_label: "Taille",
    bold: "Gras",
    underline: "Souligné",
    strike: "Barré",
    font_sans: "Sans",
    font_serif: "Serif",
    font_mono: "Mono",
    stroke_label: "Épaisseur",
    ink_label: "Couleur de l'encre",
    color_black: "Noir",
    color_blue: "Bleu",
    color_red: "Rouge",
    color_green: "Vert",
    import_signature: "Importer signature",
    draw_signature: "Dessiner une signature",
    draw_signature_title: "Dessiner une signature",
    draw_signature_hint: "Utilise le trackpad ou la souris pour tracer ta signature.",
    signature_clear: "Effacer",
    signature_cancel: "Annuler",
    signature_save: "Enregistrer",
    signature_empty: "Ajoute d'abord une signature.",
    clear_all: "Tout effacer",
    delete: "Supprimer",
    snippets_title: "Textes rapides",
    snippets_placeholder: "Ajouter un texte réutilisable",
    snippets_add: "Ajouter",
    snippets_empty: "Ajoute des textes que tu réutilises souvent.",
    snippets_use: "Glisser pour insérer",
    snippets_remove: "Supprimer le texte",
    export_pdf: "Exporter PDF",
    signatures: "Signatures",
    remove_signature: "Supprimer la signature",
    signatures_hint: "Importer une image PNG (idéal) ou JPG.",
    label_tool: "Outil",
    label_objects: "Objets",
    hint_line1: "Texte/Date: cliquer pour ajouter, double-clic pour éditer.",
    hint_line2: "Croix: cliquer pour poser. Signature: sélectionner puis cliquer pour poser.",
    hint_line3: "Glisser pour déplacer. Poignée pour redimensionner.",
    empty_hint: "Remplir et signer un PDF",
    empty_action: "Ouvrir un PDF",
    text_placeholder: "Texte...",
    text_prompt: "Texte:",
    edit_title: "Double-clic pour éditer",
    export_success: "PDF exporté vers:\n{path}",
    export_failed: "L'export a échoué pendant la génération du PDF. Consulte la console pour le détail.",
    export_tauri_failed: "L'export Tauri a échoué. Un téléchargement direct va être tenté.",
    no_pdf: "Aucun PDF chargé",
    file_label: "Fichier: {name}",
    export_note: "Export = PDF aplati (texte + image intégrés)"
  },
  en: {
    app_title: "SignStamp",
    open_pdf: "Open PDF",
    pages_singular: "page",
    pages_plural: "pages",
    zoom_out: "Zoom -",
    zoom_in: "Zoom +",
    tool_pan: "Move",
    tool_text: "Text",
    tool_date: "Date",
    tool_check: "Check",
    tool_ellipse: "Circle",
    tool_line: "Strike",
    tool_arrow: "Arrow",
    tool_highlight: "Highlight",
    tool_sign: "Signature",
    undo: "Undo",
    theme_light: "Light theme",
    theme_dark: "Dark theme",
    font_label: "Font",
    size_label: "Size",
    bold: "Bold",
    underline: "Underline",
    strike: "Strike",
    font_sans: "Sans",
    font_serif: "Serif",
    font_mono: "Mono",
    stroke_label: "Stroke",
    ink_label: "Ink color",
    color_black: "Black",
    color_blue: "Blue",
    color_red: "Red",
    color_green: "Green",
    import_signature: "Import signature",
    draw_signature: "Draw signature",
    draw_signature_title: "Draw a signature",
    draw_signature_hint: "Use your trackpad or mouse to draw your signature.",
    signature_clear: "Clear",
    signature_cancel: "Cancel",
    signature_save: "Save",
    signature_empty: "Please draw a signature first.",
    clear_all: "Clear all",
    delete: "Delete",
    snippets_title: "Quick texts",
    snippets_placeholder: "Add a reusable text",
    snippets_add: "Add",
    snippets_empty: "Add texts you reuse often.",
    snippets_use: "Drag to insert",
    snippets_remove: "Remove text",
    export_pdf: "Export PDF",
    signatures: "Signatures",
    remove_signature: "Remove signature",
    signatures_hint: "Import a PNG (ideal) or JPG image.",
    label_tool: "Tool",
    label_objects: "Objects",
    hint_line1: "Text/Date: click to add, double-click to edit.",
    hint_line2: "Check: click to place. Signature: select then click to place.",
    hint_line3: "Drag to move. Handle to resize.",
    empty_hint: "Fill and sign a PDF",
    empty_action: "Open a PDF",
    text_placeholder: "Text...",
    text_prompt: "Text:",
    edit_title: "Double-click to edit",
    export_success: "PDF exported to:\n{path}",
    export_failed: "Export failed while generating the PDF. See console for details.",
    export_tauri_failed: "Tauri export failed. A direct download will be attempted.",
    no_pdf: "No PDF loaded",
    file_label: "File: {name}",
    export_note: "Export = flattened PDF (text + image embedded)"
  },
  de: {
    app_title: "SignStamp",
    open_pdf: "PDF öffnen",
    pages_singular: "Seite",
    pages_plural: "Seiten",
    zoom_out: "Zoom -",
    zoom_in: "Zoom +",
    tool_pan: "Verschieben",
    tool_text: "Text",
    tool_date: "Datum",
    tool_check: "Kreuz",
    tool_ellipse: "Kreis",
    tool_line: "Durchstreichen",
    tool_arrow: "Pfeil",
    tool_highlight: "Markieren",
    tool_sign: "Unterschrift",
    undo: "Rückgängig",
    theme_light: "Helles Design",
    theme_dark: "Dunkles Design",
    font_label: "Schrift",
    size_label: "Größe",
    bold: "Fett",
    underline: "Unterstrichen",
    strike: "Durchgestrichen",
    font_sans: "Sans",
    font_serif: "Serif",
    font_mono: "Mono",
    stroke_label: "Strichstärke",
    ink_label: "Tintenfarbe",
    color_black: "Schwarz",
    color_blue: "Blau",
    color_red: "Rot",
    color_green: "Grün",
    import_signature: "Signatur importieren",
    draw_signature: "Unterschrift zeichnen",
    draw_signature_title: "Unterschrift zeichnen",
    draw_signature_hint: "Zeichne deine Unterschrift mit Trackpad oder Maus.",
    signature_clear: "Löschen",
    signature_cancel: "Abbrechen",
    signature_save: "Speichern",
    signature_empty: "Bitte zuerst eine Unterschrift zeichnen.",
    clear_all: "Alles löschen",
    delete: "Löschen",
    snippets_title: "Schnelltexte",
    snippets_placeholder: "Wiederverwendbaren Text hinzufügen",
    snippets_add: "Hinzufügen",
    snippets_empty: "Füge Texte hinzu, die du oft nutzt.",
    snippets_use: "Zum Einfügen ziehen",
    snippets_remove: "Text entfernen",
    export_pdf: "PDF exportieren",
    signatures: "Signaturen",
    remove_signature: "Signatur entfernen",
    signatures_hint: "PNG (ideal) oder JPG importieren.",
    label_tool: "Werkzeug",
    label_objects: "Objekte",
    hint_line1: "Text/Datum: klicken zum Hinzufügen, Doppelklick zum Bearbeiten.",
    hint_line2: "Kreuz: klicken zum Platzieren. Signatur: auswählen, dann klicken.",
    hint_line3: "Ziehen zum Verschieben. Griff zum Skalieren.",
    empty_hint: "Ein PDF ausfüllen und unterschreiben",
    empty_action: "PDF öffnen",
    text_placeholder: "Text...",
    text_prompt: "Text:",
    edit_title: "Doppelklick zum Bearbeiten",
    export_success: "PDF exportiert nach:\n{path}",
    export_failed: "Export fehlgeschlagen beim Erstellen des PDFs. Siehe Konsole für Details.",
    export_tauri_failed: "Tauri-Export fehlgeschlagen. Direkter Download wird versucht.",
    no_pdf: "Kein PDF geladen",
    file_label: "Datei: {name}",
    export_note: "Export = abgeflachtes PDF (Text + Bild eingebettet)"
  },
  es: {
    app_title: "SignStamp",
    open_pdf: "Abrir PDF",
    pages_singular: "página",
    pages_plural: "páginas",
    zoom_out: "Zoom -",
    zoom_in: "Zoom +",
    tool_pan: "Mover",
    tool_text: "Texto",
    tool_date: "Fecha",
    tool_check: "Marca",
    tool_ellipse: "Círculo",
    tool_line: "Tachar",
    tool_arrow: "Flecha",
    tool_highlight: "Resaltar",
    tool_sign: "Firma",
    undo: "Deshacer",
    theme_light: "Tema claro",
    theme_dark: "Tema oscuro",
    font_label: "Fuente",
    size_label: "Tamaño",
    bold: "Negrita",
    underline: "Subrayado",
    strike: "Tachado",
    font_sans: "Sans",
    font_serif: "Serif",
    font_mono: "Mono",
    stroke_label: "Grosor",
    ink_label: "Color de tinta",
    color_black: "Negro",
    color_blue: "Azul",
    color_red: "Rojo",
    color_green: "Verde",
    import_signature: "Importar firma",
    draw_signature: "Dibujar firma",
    draw_signature_title: "Dibujar una firma",
    draw_signature_hint: "Usa el trackpad o el ratón para dibujar tu firma.",
    signature_clear: "Borrar",
    signature_cancel: "Cancelar",
    signature_save: "Guardar",
    signature_empty: "Primero dibuja una firma.",
    clear_all: "Borrar todo",
    delete: "Eliminar",
    snippets_title: "Textos rápidos",
    snippets_placeholder: "Añadir texto reutilizable",
    snippets_add: "Añadir",
    snippets_empty: "Añade textos que reutilizas a menudo.",
    snippets_use: "Arrastra para insertar",
    snippets_remove: "Eliminar texto",
    export_pdf: "Exportar PDF",
    signatures: "Firmas",
    remove_signature: "Eliminar firma",
    signatures_hint: "Importa una imagen PNG (ideal) o JPG.",
    label_tool: "Herramienta",
    label_objects: "Objetos",
    hint_line1: "Texto/Fecha: clic para añadir, doble clic para editar.",
    hint_line2: "Marca: clic para colocar. Firma: selecciona y luego clic.",
    hint_line3: "Arrastra para mover. Asa para redimensionar.",
    empty_hint: "Rellenar y firmar un PDF",
    empty_action: "Abrir PDF",
    text_placeholder: "Texto...",
    text_prompt: "Texto:",
    edit_title: "Doble clic para editar",
    export_success: "PDF exportado a:\n{path}",
    export_failed: "La exportación falló al generar el PDF. Ver consola para detalles.",
    export_tauri_failed: "Falló la exportación con Tauri. Se intentará descarga directa.",
    no_pdf: "Ningún PDF cargado",
    file_label: "Archivo: {name}",
    export_note: "Exportar = PDF aplanado (texto + imagen incrustados)"
  },
  zh: {
    app_title: "SignStamp",
    open_pdf: "打开 PDF",
    pages_singular: "页",
    pages_plural: "页",
    zoom_out: "缩小",
    zoom_in: "放大",
    tool_pan: "移动",
    tool_text: "文本",
    tool_date: "日期",
    tool_check: "勾选",
    tool_ellipse: "圈选",
    tool_line: "划线",
    tool_arrow: "箭头",
    tool_highlight: "高亮",
    tool_sign: "签名",
    undo: "撤销",
    theme_light: "浅色主题",
    theme_dark: "深色主题",
    font_label: "字体",
    size_label: "大小",
    bold: "加粗",
    underline: "下划线",
    strike: "删除线",
    font_sans: "无衬线",
    font_serif: "衬线",
    font_mono: "等宽",
    stroke_label: "粗细",
    ink_label: "墨水颜色",
    color_black: "黑色",
    color_blue: "蓝色",
    color_red: "红色",
    color_green: "绿色",
    import_signature: "导入签名",
    draw_signature: "手写签名",
    draw_signature_title: "手写签名",
    draw_signature_hint: "用触控板或鼠标绘制你的签名。",
    signature_clear: "清除",
    signature_cancel: "取消",
    signature_save: "保存",
    signature_empty: "请先绘制签名。",
    clear_all: "全部清除",
    delete: "删除",
    snippets_title: "常用文本",
    snippets_placeholder: "添加可复用文本",
    snippets_add: "添加",
    snippets_empty: "添加你经常复用的文本。",
    snippets_use: "拖拽插入",
    snippets_remove: "删除文本",
    export_pdf: "导出 PDF",
    signatures: "签名",
    remove_signature: "删除签名",
    signatures_hint: "导入 PNG（推荐）或 JPG 图片。",
    label_tool: "工具",
    label_objects: "对象",
    hint_line1: "文本/日期：点击添加，双击编辑。",
    hint_line2: "勾选：点击放置。签名：选择后点击放置。",
    hint_line3: "拖动移动。拖拽手柄缩放。",
    empty_hint: "填写并签署 PDF",
    empty_action: "打开 PDF",
    text_placeholder: "文本...",
    text_prompt: "文本：",
    edit_title: "双击编辑",
    export_success: "PDF 已导出到：\n{path}",
    export_failed: "生成 PDF 时导出失败。详见控制台。",
    export_tauri_failed: "Tauri 导出失败，将尝试直接下载。",
    no_pdf: "未加载 PDF",
    file_label: "文件：{name}",
    export_note: "导出 = 扁平化 PDF（文本 + 图片嵌入）"
  },
  ja: {
    app_title: "SignStamp",
    open_pdf: "PDFを開く",
    pages_singular: "ページ",
    pages_plural: "ページ",
    zoom_out: "ズームアウト",
    zoom_in: "ズームイン",
    tool_pan: "移動",
    tool_text: "テキスト",
    tool_date: "日付",
    tool_check: "チェック",
    tool_ellipse: "丸囲み",
    tool_line: "打ち消し線",
    tool_arrow: "矢印",
    tool_highlight: "ハイライト",
    tool_sign: "署名",
    undo: "元に戻す",
    theme_light: "ライトテーマ",
    theme_dark: "ダークテーマ",
    font_label: "フォント",
    size_label: "サイズ",
    bold: "太字",
    underline: "下線",
    strike: "取り消し線",
    font_sans: "サンセリフ",
    font_serif: "セリフ",
    font_mono: "等幅",
    stroke_label: "太さ",
    ink_label: "インク色",
    color_black: "黒",
    color_blue: "青",
    color_red: "赤",
    color_green: "緑",
    import_signature: "署名を読み込む",
    draw_signature: "署名を書く",
    draw_signature_title: "署名を書く",
    draw_signature_hint: "トラックパッドやマウスで署名を書いてください。",
    signature_clear: "消去",
    signature_cancel: "キャンセル",
    signature_save: "保存",
    signature_empty: "先に署名を書いてください。",
    clear_all: "すべて消去",
    delete: "削除",
    snippets_title: "定型文",
    snippets_placeholder: "再利用できるテキストを追加",
    snippets_add: "追加",
    snippets_empty: "よく使うテキストを追加してください。",
    snippets_use: "ドラッグして挿入",
    snippets_remove: "テキストを削除",
    export_pdf: "PDFを書き出す",
    signatures: "署名",
    remove_signature: "署名を削除",
    signatures_hint: "PNG（推奨）または JPG 画像を読み込んでください。",
    label_tool: "ツール",
    label_objects: "オブジェクト",
    hint_line1: "テキスト/日付：クリックで追加、ダブルクリックで編集。",
    hint_line2: "チェック：クリックで配置。署名：選択してクリック。",
    hint_line3: "ドラッグで移動。ハンドルでサイズ変更。",
    empty_hint: "PDFを入力して署名する",
    empty_action: "PDFを開く",
    text_placeholder: "テキスト...",
    text_prompt: "テキスト：",
    edit_title: "ダブルクリックで編集",
    export_success: "PDF を書き出しました：\n{path}",
    export_failed: "PDF の生成中に書き出しに失敗しました。コンソールを確認してください。",
    export_tauri_failed: "Tauri の書き出しに失敗しました。直接ダウンロードを試みます。",
    no_pdf: "PDF 未読み込み",
    file_label: "ファイル：{name}",
    export_note: "書き出し = フラット化PDF（テキスト + 画像埋め込み）"
  },
  ar: {
    app_title: "SignStamp",
    open_pdf: "فتح PDF",
    pages_singular: "صفحة",
    pages_plural: "صفحات",
    zoom_out: "تصغير",
    zoom_in: "تكبير",
    tool_pan: "تحريك",
    tool_text: "نص",
    tool_date: "تاريخ",
    tool_check: "علامة",
    tool_ellipse: "دائرة",
    tool_line: "شطب",
    tool_arrow: "سهم",
    tool_highlight: "تمييز",
    tool_sign: "توقيع",
    undo: "تراجع",
    theme_light: "سمة فاتحة",
    theme_dark: "سمة داكنة",
    font_label: "الخط",
    size_label: "الحجم",
    bold: "عريض",
    underline: "تسطير",
    strike: "يتوسطه خط",
    font_sans: "Sans",
    font_serif: "Serif",
    font_mono: "Mono",
    stroke_label: "السُمك",
    ink_label: "لون الحبر",
    color_black: "أسود",
    color_blue: "أزرق",
    color_red: "أحمر",
    color_green: "أخضر",
    import_signature: "استيراد توقيع",
    draw_signature: "ارسم توقيعاً",
    draw_signature_title: "ارسم توقيعاً",
    draw_signature_hint: "استخدم لوحة اللمس أو الفأرة لرسم توقيعك.",
    signature_clear: "مسح",
    signature_cancel: "إلغاء",
    signature_save: "حفظ",
    signature_empty: "يرجى رسم توقيع أولاً.",
    clear_all: "مسح الكل",
    delete: "حذف",
    snippets_title: "نصوص سريعة",
    snippets_placeholder: "أضف نصاً قابلًا لإعادة الاستخدام",
    snippets_add: "إضافة",
    snippets_empty: "أضف نصوصًا تستخدمها كثيرًا.",
    snippets_use: "اسحب للإدراج",
    snippets_remove: "حذف النص",
    export_pdf: "تصدير PDF",
    signatures: "التواقيع",
    remove_signature: "حذف التوقيع",
    signatures_hint: "استيراد صورة PNG (مفضل) أو JPG.",
    label_tool: "الأداة",
    label_objects: "العناصر",
    hint_line1: "نص/تاريخ: انقر للإضافة، انقر مرتين للتعديل.",
    hint_line2: "علامة: انقر للوضع. توقيع: اختر ثم انقر.",
    hint_line3: "اسحب للتحريك. المقبض لتغيير الحجم.",
    empty_hint: "تعبئة وتوقيع ملف PDF",
    empty_action: "فتح PDF",
    text_placeholder: "نص...",
    text_prompt: "نص:",
    edit_title: "انقر مرتين للتعديل",
    export_success: "تم تصدير PDF إلى:\n{path}",
    export_failed: "فشل التصدير أثناء إنشاء PDF. راجع وحدة التحكم للتفاصيل.",
    export_tauri_failed: "فشل تصدير Tauri. سيتم محاولة تنزيل مباشر.",
    no_pdf: "لا يوجد PDF محمّل",
    file_label: "الملف: {name}",
    export_note: "التصدير = PDF مسطح (نص + صورة مدمجة)"
  },
  uk: {
    app_title: "SignStamp",
    open_pdf: "Відкрити PDF",
    pages_singular: "сторінка",
    pages_plural: "сторінок",
    zoom_out: "Зменшити",
    zoom_in: "Збільшити",
    tool_pan: "Перемістити",
    tool_text: "Текст",
    tool_date: "Дата",
    tool_check: "Хрестик",
    tool_ellipse: "Коло",
    tool_line: "Закреслення",
    tool_arrow: "Стрілка",
    tool_highlight: "Підсвітка",
    tool_sign: "Підпис",
    undo: "Скасувати",
    theme_light: "Світла тема",
    theme_dark: "Темна тема",
    font_label: "Шрифт",
    size_label: "Розмір",
    bold: "Жирний",
    underline: "Підкреслення",
    strike: "Закреслення",
    font_sans: "Sans",
    font_serif: "Serif",
    font_mono: "Mono",
    stroke_label: "Товщина",
    ink_label: "Колір чорнила",
    color_black: "Чорний",
    color_blue: "Синій",
    color_red: "Червоний",
    color_green: "Зелений",
    import_signature: "Імпортувати підпис",
    draw_signature: "Намалювати підпис",
    draw_signature_title: "Намалювати підпис",
    draw_signature_hint: "Використай трекпад або мишу, щоб намалювати підпис.",
    signature_clear: "Очистити",
    signature_cancel: "Скасувати",
    signature_save: "Зберегти",
    signature_empty: "Спочатку намалюй підпис.",
    clear_all: "Очистити все",
    delete: "Видалити",
    snippets_title: "Швидкі тексти",
    snippets_placeholder: "Додати текст для повторного використання",
    snippets_add: "Додати",
    snippets_empty: "Додай тексти, які часто використовуєш.",
    snippets_use: "Перетягніть, щоб вставити",
    snippets_remove: "Видалити текст",
    export_pdf: "Експорт PDF",
    signatures: "Підписи",
    remove_signature: "Видалити підпис",
    signatures_hint: "Імпортуйте PNG (краще) або JPG.",
    label_tool: "Інструмент",
    label_objects: "Обʼєкти",
    hint_line1: "Текст/Дата: клік — додати, подвійний клік — редагувати.",
    hint_line2: "Хрестик: клік — поставити. Підпис: виберіть і клікніть.",
    hint_line3: "Перетягування для переміщення. Ручка — змінити розмір.",
    empty_hint: "Заповнити та підписати PDF",
    empty_action: "Відкрити PDF",
    text_placeholder: "Текст...",
    text_prompt: "Текст:",
    edit_title: "Подвійний клік для редагування",
    export_success: "PDF експортовано до:\n{path}",
    export_failed: "Експорт не вдався під час створення PDF. Дивіться консоль.",
    export_tauri_failed: "Експорт Tauri не вдався. Буде спроба прямого завантаження.",
    no_pdf: "PDF не завантажено",
    file_label: "Файл: {name}",
    export_note: "Експорт = плаский PDF (текст + зображення вбудовано)"
  }
};

export function detectLocale(): Locale {
  const raw = (navigator.languages?.[0] || navigator.language || "en").toLowerCase();
  if (raw.startsWith("fr")) return "fr";
  if (raw.startsWith("en")) return "en";
  if (raw.startsWith("de")) return "de";
  if (raw.startsWith("es")) return "es";
  if (raw.startsWith("zh")) return "zh";
  if (raw.startsWith("ja")) return "ja";
  if (raw.startsWith("ar")) return "ar";
  if (raw.startsWith("uk")) return "uk";
  return "en";
}

export function makeTranslator(locale: Locale) {
  return (key: string) => translations[locale]?.[key] ?? translations.en[key] ?? key;
}

export function formatLocaleDate(locale: Locale, date: Date) {
  return new Intl.DateTimeFormat(locale, { day: "2-digit", month: "2-digit", year: "numeric" }).format(date);
}

export function getDirection(locale: Locale) {
  return locale === "ar" ? "rtl" : "ltr";
}
